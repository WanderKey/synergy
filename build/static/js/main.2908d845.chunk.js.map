{"version":3,"sources":["defaultimgs.js","components/MarketTable.js","components/TransacTable.js","pages/Home.js","components/FileTable.js","components/ShareTable.js","components/StreamTable.js","components/GetTable.js","pages/Profile.js","pages/Settings.js","images/rubick.png","components/Sidebar.js","components/Message.js","components/Rightbar.js","App.js","reportWebVitals.js","index.js"],"names":["defaultImgs","MarketTable","isupdate","useState","fileArr","setFileArray","fileData","setFileData","useMoralis","Moralis","user","account","User","current","saveFile","useMoralisFile","fileID","files","Object","extend","query","Query","equalTo","first","results","userquery","myDetails","fileListUrl","attributes","fileList","axios","get","myfiles","data","map","file","push","console","log","newFile","ID","size","fileSize","fileName","owner","fileOwner","address","fileAddress","base64","btoa","JSON","stringify","type","saveIPFS","JSONList","set","ipfs","save","traceUrl","fileTrace","shareFrom","date","Date","currentTime","toLocaleString","timeZone","res","traceData","newTrace","from","to","ethAddress","timeStamp","JSONTrace","alert","useEffect","find","error","getFile","tableData","i","name","slice","share","id","size_show","toFixed","btns","color","isTransparent","text","onClick","onEditbtn","alignCellItems","columnsConfig","header","isColumnSortable","maxPages","onPageNumberChanged","onRowClick","pageSize","TransacTable","createdAt","hour12","trace","reverse","Home","Isupdate","setUpdata","Update","className","fill","svg","FileTable","crateTime","icon","iconColor","iconLayout","onDeletebtn","ShareTable","GetTable","newfile","window","open","onDownloadbtn","Profile","inputFile","useRef","theFile","setTheFile","selectFile","setSelectFile","uploadFile","useWeb3ExecuteFunction","myFiles","File","ipfsAddress","location","reload","StreamTable","click","ref","onChange","event","target","style","display","backgroundColor","Settings","selectedFile","setSelectedFile","username","setUserName","setName","email","setMail","bio","setBio","institute","setInsti","job","setJob","isUpdataed","setUpdate","saveEdits","src","profilePic","img","URL","createObjectURL","theme","label","value","width","labelBgColor","e","Sidebar","mylogo","Logo","clickCounter","setCounter","alt","count","Message","messageArr","setMessageArr","Messages","limit7","getMessages","messageUserPic","messageUserName","messageAcc","month","day","messageTxt","Rightbar","message","setMessage","newMessage","App","isAuthenticated","logOut","then","path","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","appId","serverUrl","document","getElementById"],"mappings":"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","file":"static/js/main.2908d845.chunk.js","sourcesContent":["export const defaultImgs = [\r\n  \"https://ipfs.moralis.io:2053/ipfs/QmNgA9MNWFfRaoKzBt21VghQopnKXBgVxzyGvv5qjsV4Vw/media/1\",\r\n  \"https://ipfs.moralis.io:2053/ipfs/QmNgA9MNWFfRaoKzBt21VghQopnKXBgVxzyGvv5qjsV4Vw/media/2\",\r\n  \"https://ipfs.moralis.io:2053/ipfs/QmVW594boVgfCpdo1pq9fmn9GhwwbHn4cL2jMn6bPFNuTv\",\r\n  \"https://ipfs.moralis.io:2053/ipfs/QmWectmwttyxmbu1FQWZanECd9NFwyPHpEHSFib9fAiDjj\",\r\n  \"https://ipfs.moralis.io:2053/ipfs/QmbfZwB8Ur6CzzPVeFm6rYCMgWDwxo5vji5GgXxvYweaxV\"\r\n];\r\n","import {Table,  Button} from \"web3uikit\"\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { useMoralis, useMoralisFile} from \"react-moralis\";\r\nimport axios from \"axios\";\r\n\r\nconst MarketTable = ({isupdate}) => {\r\n\r\n  const [fileArr, setFileArray] = useState();\r\n  const [fileData, setFileData] = useState();\r\n  const { Moralis, account} = useMoralis();\r\n  const user = Moralis.User.current();\r\n  const { saveFile } = useMoralisFile();\r\n\r\n  useEffect(() => {\r\n    async function getFile() {\r\n        try {\r\n          const files = Moralis.Object.extend(\"fileStorage\");\r\n          const query = new Moralis.Query(files);\r\n          query.equalTo(\"isShare\",true);\r\n          const results = await query.find();\r\n          setFileArray(results);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      }\r\n      getFile();\r\n      // console.log(fileArr);\r\n      const myfiles = fileArr;\r\n      const tableData=[];\r\n      {myfiles?.map((file, i) => {\r\n    \r\n        const name = file.attributes.fileName;\r\n        // const crateTime = file.attributes.createdAt.toLocaleString('chinese',{hour12:false});\r\n\r\n        const owner = file.attributes.fileOwner.slice(0,10);\r\n        const share = file.attributes.shareFrom.slice(0,10);\r\n        const fileID = file.id;\r\n        const size = file.attributes.fileSize ;\r\n        const size_KB = size / 1024;\r\n        const size_MB = size_KB /1024;\r\n        const size_show = size_MB.toFixed(1);\r\n        const btns =  <>\r\n        <Button color=\"blue\"  isTransparent size=\"small\" text=\"获取\" onClick={() => onEditbtn(fileID)}/>\r\n        {/* <Button  icon=\"x\" iconColor=\"red\" iconLayout=\"icon-only\" isTransparent onClick={() => onDeletebtn(fileID)}/> */}\r\n        </>\r\n        const data = [i+1 , name, size_show, owner,share, btns];\r\n    \r\n        tableData.push(data);\r\n      }\r\n      )}\r\n      // console.log(tableData);\r\n      setFileData(tableData);\r\n\r\n},[isupdate])\r\n\r\n  async function  onEditbtn(fileID) {\r\n    const files = Moralis.Object.extend(\"fileStorage\");\r\n    const query = new Moralis.Query(files);\r\n    query.equalTo(\"objectId\", fileID);\r\n    const results = await query.first();\r\n\r\n    //将文件添加到用户获取的文件列表中\r\n    const User = Moralis.Object.extend(\"_User\");\r\n    const userquery = new Moralis.Query(User);\r\n    const myDetails = await userquery.first();\r\n\r\n    const fileListUrl = myDetails.attributes.fileList;\r\n    const fileList = [];\r\n\r\n    if(fileListUrl) { \r\n      const results = await axios.get(fileListUrl);\r\n      const myfiles = results.data;\r\n      {myfiles.map((file) => {\r\n        fileList.push(file);\r\n      })}\r\n      console.log(myfiles);\r\n    }\r\n\r\n    const newFile = {\r\n      ID : fileID,\r\n      size : results.attributes.fileSize,\r\n      fileName: results.attributes.fileName,\r\n      owner : results.attributes.fileOwner,\r\n      address : results.attributes.fileAddress,\r\n    }\r\n    fileList.push(newFile);\r\n    const JSONList = await saveFile (\r\n      \"fileList.json\",\r\n      { base64: btoa(JSON.stringify(fileList)) },\r\n      {\r\n        type: \"base64\",\r\n        saveIPFS: true,\r\n      }\r\n    );\r\n    console.log(fileList);\r\n    myDetails.set(\"fileList\", JSONList.ipfs());\r\n    console.log(JSONList.ipfs());\r\n    await myDetails.save();\r\n\r\n\r\n    //获取文件地址和trace数据\r\n    // const fileAddress = results.attributes.fileAddress;\r\n    const traceUrl = results.attributes.fileTrace;\r\n    const shareFrom = results.attributes.shareFrom;\r\n    // console.log(traceUrl);\r\n    //将记录添加到trace数据中\r\n    const date = new Date();\r\n    const currentTime = date.toLocaleString('zh',{timeZone:\"Asia/Shanghai\"});\r\n    const res = await axios.get(traceUrl);\r\n    const traceData = res.data;\r\n    const newTrace = {\r\n      from: shareFrom,\r\n      to: user.attributes.ethAddress,\r\n      timeStamp : currentTime,\r\n    }\r\n    traceData.push(newTrace);\r\n    const JSONTrace = await saveFile(\r\n      \"fileTrace.json\",\r\n        { base64: btoa(JSON.stringify(traceData)) },\r\n        {\r\n          type: \"base64\",\r\n          saveIPFS: true,\r\n        }\r\n      );\r\n    results.set(\"fileTrace\",JSONTrace.ipfs());\r\n    // console.log(traceData);\r\n \r\n    // results.set(\"isShare\", true);\r\n    await results.save()\r\n    alert(\"获取文件成功！\")\r\n\r\n  }\r\n\r\n  // async function  onDeletebtn(fileID) {\r\n  //   const files = Moralis.Object.extend(\"fileStorage\");\r\n  //   const query = new Moralis.Query(files);\r\n  //   query.equalTo(\"objectId\", fileID);\r\n  //   const results = await query.first();\r\n  //   results.set(\"isVisible\", false);\r\n  //   await results.save()\r\n\r\n  // }\r\n\r\n\r\n    return (\r\n      <div>\r\n          <Table\r\n    alignCellItems=\"center\"\r\n    columnsConfig=\"0.7fr 4fr 1.5fr 3fr 3fr 2fr\"\r\n    data={fileData}\r\n    \r\n    header={[\r\n      <span>#</span>,\r\n      <span>文件名</span>,\r\n      <span>文件大小(MB)</span>,\r\n      <span>创建者</span>,\r\n      <span>共享者</span>,\r\n      \"\"\r\n    ]}\r\n    isColumnSortable={[\r\n      true,\r\n      true,\r\n      true,\r\n      true,\r\n      false\r\n    ]}\r\n    maxPages={3}\r\n    onPageNumberChanged={function noRefCheck(){}}\r\n    onRowClick={function noRefCheck(){}}\r\n    pageSize={5}\r\n  />\r\n      </div>\r\n    )\r\n\r\n  }\r\nexport default MarketTable;","import {Table, Avatar, Typography, Button} from \"web3uikit\"\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { useMoralis } from \"react-moralis\";\r\nimport axios from \"axios\";\r\n\r\nconst TransacTable = ({isupdate}) => {\r\n\r\n  const [fileArr, setFileArray] = useState();\r\n  const [fileData, setFileData] = useState();\r\n  const { Moralis, account} = useMoralis();\r\n\r\n  useEffect(() => {\r\n    async function getFile() {\r\n        try {\r\n          const files = Moralis.Object.extend(\"fileStorage\");\r\n          const query = new Moralis.Query(files);\r\n        //   query.equalTo(\"fileOwner\", account);\r\n          query.equalTo(\"isVisible\", true);\r\n        //   query.equalTo(\"isShare\",true);\r\n          const results = await query.find();\r\n  \r\n          setFileArray(results);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      }\r\n      getFile();\r\n    //   console.log(fileArr);\r\n      const myfiles = fileArr;\r\n      const tableData=[];\r\n      {myfiles?.map(async (file) => {\r\n    \r\n        const name = file.attributes.fileName;\r\n        const crateTime = file.attributes.createdAt.toLocaleString('chinese',{hour12:false});\r\n        const owner = file.attributes.fileOwner.slice(0,10);\r\n        const size = file.attributes.fileSize ;\r\n        const size_KB = size / 1024;\r\n        const size_MB = size_KB /1024;\r\n        const size_show = size_MB.toFixed(1);\r\n        const fileID = file.id;\r\n        // const btns =  <>\r\n        // <Button color=\"blue\"  isTransparent size=\"small\" text=\"共享\" onClick={() => onEditbtn(fileID)}/>\r\n        // <Button  icon=\"x\" iconColor=\"red\" iconLayout=\"icon-only\" isTransparent onClick={() => onDeletebtn(fileID)}/>\r\n        // </>\r\n        const traceUrl = file.attributes.fileTrace;\r\n        console.log(traceUrl);\r\n        const res = await axios.get(traceUrl);\r\n        const traceData = res.data;\r\n        // traceData.reverse();\r\n        console.log(traceData);\r\n        {traceData?.map((trace) => {\r\n          // console.log(trace);\r\n          const from = trace.from.slice(0,10);\r\n          // console.log(from);\r\n          // if(from.length > 5) {\r\n          //   from = from.slice(0,4) + \"...\" + from.slice(38);\r\n          // }\r\n          const to = trace.to.slice(0,10);\r\n          // if(to.length > 5) {\r\n          //   to = to.slice(0,4) + \"...\" + to.slice(38);\r\n          // }\r\n          const timeStamp = trace.timeStamp;\r\n          // console.log(timeStamp);\r\n          \r\n        const data = [name, size_show, from, to, timeStamp];\r\n        tableData.push(data);\r\n        })}\r\n        tableData.reverse();\r\n        console.log(tableData)\r\n      }\r\n      )}\r\n      setFileData(tableData);\r\n\r\n},[isupdate])\r\n\r\n//   async function  onEditbtn(fileID) {\r\n//     const files = Moralis.Object.extend(\"fileStorage\");\r\n//     const query = new Moralis.Query(files);\r\n//     query.equalTo(\"objectId\", fileID);\r\n//     const results = await query.first();\r\n//     results.set(\"isShare\", true);\r\n//     await results.save()\r\n//     // console.log(results);\r\n\r\n//   }\r\n\r\n//   async function  onDeletebtn(fileID) {\r\n//     const files = Moralis.Object.extend(\"fileStorage\");\r\n//     const query = new Moralis.Query(files);\r\n//     query.equalTo(\"objectId\", fileID);\r\n//     const results = await query.first();\r\n//     results.set(\"isVisible\", false);\r\n//     await results.save()\r\n//     // console.log(results);\r\n\r\n//   }\r\n\r\n\r\n    return (\r\n      <div>\r\n          <Table\r\n    alignCellItems=\"center\"\r\n    columnsConfig=\" 4fr 1.5fr 3fr 2fr 2fr\"\r\n    data={fileData}\r\n    \r\n    header={[\r\n      <span>文件名</span>,\r\n      <span>文件大小(MB)</span>,\r\n      <span>From</span>,\r\n      <span>to</span>,\r\n      <span>时间</span>\r\n    ]}\r\n    isColumnSortable={[\r\n      true,\r\n      true,\r\n      true,\r\n      true,\r\n      true,\r\n    ]}\r\n    maxPages={3}\r\n    onPageNumberChanged={function noRefCheck(){}}\r\n    onRowClick={function noRefCheck(){}}\r\n    pageSize={5}\r\n  />\r\n      </div>\r\n    )\r\n\r\n  }\r\nexport default TransacTable;","import React from \"react\";\r\nimport \"./Home.css\";\r\nimport { defaultImgs } from \"../defaultimgs\";\r\nimport { TextArea } from \"web3uikit\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useMoralis, useWeb3ExecuteFunction } from \"react-moralis\";\r\nimport { Icon, Button } from \"web3uikit\";\r\nimport MarketTable from \"../components/MarketTable\";\r\nimport TransacTable from \"../components/TransacTable\";\r\n\r\nconst Home = () => {\r\n  const [Isupdate, setUpdata] = useState(false);\r\n\r\n  const Update = () => {\r\n    setUpdata(!Isupdate);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setUpdata(!Isupdate);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className=\"pageIdentify\">数据市场</div>\r\n        <div className=\"mainContent\">\r\n          <div className=\"fileList\">\r\n            <div className=\"title-box\">\r\n              <div className=\"title\">文件列表</div>\r\n              <div className=\"post\" onClick={Update}>\r\n                更新\r\n                <Icon fill=\"#ffffff\" size={20} svg=\"reload\" />\r\n              </div>\r\n            </div>\r\n            <MarketTable isupdate={Isupdate}></MarketTable>\r\n          </div>\r\n\r\n          <div className=\"fileList\">\r\n            <div className=\"title-box\">\r\n              <div className=\"title\">传输记录</div>\r\n              <div className=\"post\" onClick={Update}>\r\n                更新\r\n                <Icon fill=\"#ffffff\" size={20} svg=\"reload\" />\r\n              </div>\r\n            </div>\r\n            <TransacTable isupdate={Isupdate}></TransacTable>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import { Table, Avatar, Typography, Button } from \"web3uikit\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { useMoralis } from \"react-moralis\";\r\n\r\nconst FileTable = ({ isupdate }) => {\r\n  const [fileArr, setFileArray] = useState();\r\n  const [fileData, setFileData] = useState();\r\n  const { Moralis, account } = useMoralis();\r\n\r\n  useEffect(() => {\r\n    async function getFile() {\r\n      try {\r\n        const files = Moralis.Object.extend(\"fileStorage\");\r\n        const query = new Moralis.Query(files);\r\n        query.equalTo(\"fileOwner\", account);\r\n        query.equalTo(\"isVisible\", true);\r\n        const results = await query.find();\r\n\r\n        setFileArray(results);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n    getFile();\r\n    // console.log(fileArr);\r\n    const myfiles = fileArr;\r\n    const tableData = [];\r\n    {\r\n      myfiles?.map((file, i) => {\r\n        const name = file.attributes.fileName;\r\n        const crateTime = file.attributes.createdAt.toLocaleString(\"chinese\", {\r\n          hour12: false,\r\n        });\r\n        const owner = file.attributes.fileOwner.slice(0, 10);\r\n        const size = file.attributes.fileSize;\r\n        const size_KB = size / 1024;\r\n        const size_MB = size_KB / 1024;\r\n        const size_show = size_MB.toFixed(1);\r\n        const fileID = file.id;\r\n        const btns = (\r\n          <>\r\n            <Button\r\n              color=\"blue\"\r\n              isTransparent\r\n              size=\"small\"\r\n              text=\"共享\"\r\n              onClick={() => onEditbtn(fileID)}\r\n            />\r\n            <Button\r\n              icon=\"x\"\r\n              iconColor=\"red\"\r\n              iconLayout=\"icon-only\"\r\n              isTransparent\r\n              onClick={() => onDeletebtn(fileID)}\r\n            />\r\n          </>\r\n        );\r\n        const data = [i + 1, name, size_show, crateTime, btns];\r\n\r\n        tableData.push(data);\r\n      });\r\n    }\r\n    setFileData(tableData);\r\n  }, [isupdate]);\r\n\r\n  async function onEditbtn(fileID) {\r\n    const files = Moralis.Object.extend(\"fileStorage\");\r\n    const query = new Moralis.Query(files);\r\n    query.equalTo(\"objectId\", fileID);\r\n    const results = await query.first();\r\n    results.set(\"isShare\", true);\r\n    await results.save();\r\n    alert(\"文件已共享！\");\r\n  }\r\n\r\n  async function onDeletebtn(fileID) {\r\n    const files = Moralis.Object.extend(\"fileStorage\");\r\n    const query = new Moralis.Query(files);\r\n    query.equalTo(\"objectId\", fileID);\r\n    const results = await query.first();\r\n    results.set(\"isVisible\", false);\r\n    await results.save();\r\n    // console.log(results);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Table\r\n        alignCellItems=\"center\"\r\n        columnsConfig=\"0.7fr 4fr 1.5fr 3fr 2fr\"\r\n        data={fileData}\r\n        header={[\r\n          <span>#</span>,\r\n          <span>文件名</span>,\r\n          <span>文件大小(MB)</span>,\r\n          <span>创建日期</span>,\r\n          \"\",\r\n        ]}\r\n        isColumnSortable={[true, true, true, true, false]}\r\n        maxPages={3}\r\n        onPageNumberChanged={function noRefCheck() {}}\r\n        onRowClick={function noRefCheck() {}}\r\n        pageSize={5}\r\n      />\r\n    </div>\r\n  );\r\n};\r\nexport default FileTable;\r\n","import {Table,  Button} from \"web3uikit\"\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { useMoralis } from \"react-moralis\";\r\n\r\nconst ShareTable = ({isupdate}) => {\r\n\r\n  const [fileArr, setFileArray] = useState();\r\n  const [fileData, setFileData] = useState();\r\n  const { Moralis, account} = useMoralis();\r\n  const user = Moralis.User.current();\r\n\r\n  useEffect(() => {\r\n    async function getFile() {\r\n        try {\r\n          const files = Moralis.Object.extend(\"fileStorage\");\r\n          const query = new Moralis.Query(files);\r\n          query.equalTo(\"shareFrom\", account);\r\n          query.equalTo(\"isVisible\", true);\r\n          query.equalTo(\"isShare\",true);\r\n          const results = await query.find();\r\n  \r\n          setFileArray(results);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      }\r\n      getFile();\r\n      // console.log(fileArr);\r\n      const myfiles = fileArr;\r\n      const tableData=[];\r\n      {myfiles?.map((file, i) => {\r\n    \r\n        const name = file.attributes.fileName;\r\n        const crateTime = file.attributes.createdAt.toLocaleString('chinese',{hour12:false});\r\n        const owner = file.attributes.fileOwner.slice(0,10);\r\n        const size = file.attributes.fileSize ;\r\n        const size_KB = size / 1024;\r\n        const size_MB = size_KB /1024;\r\n        const size_show = size_MB.toFixed(1);\r\n        const fileID = file.id;\r\n        const btns =  <>\r\n        <Button color=\"blue\"  isTransparent size=\"small\" text=\"结束共享\" onClick={() => onEditbtn(fileID)}/>\r\n        {/* <Button  icon=\"x\" iconColor=\"red\" iconLayout=\"icon-only\" isTransparent onClick={() => onDeletebtn(fileID)}/> */}\r\n        </>\r\n        const data = [i+1 , name, size_show, owner, btns];\r\n    \r\n        tableData.push(data);\r\n      }\r\n      )}\r\n      setFileData(tableData);\r\n\r\n},[isupdate])\r\n\r\n  async function  onEditbtn(fileID) {\r\n    const files = Moralis.Object.extend(\"fileStorage\");\r\n    const query = new Moralis.Query(files);\r\n    query.equalTo(\"objectId\", fileID);\r\n    const results = await query.first();\r\n    results.set(\"isShare\", false);\r\n    results.set(\"shareFrom\",user.attributes.ethAddress);\r\n    await results.save()\r\n    alert(\"文件已结束共享！\");\r\n\r\n  }\r\n\r\n//   async function  onDeletebtn(fileID) {\r\n//     const files = Moralis.Object.extend(\"fileStorage\");\r\n//     const query = new Moralis.Query(files);\r\n//     query.equalTo(\"objectId\", fileID);\r\n//     const results = await query.first();\r\n//     results.set(\"isVisible\", false);\r\n//     await results.save()\r\n\r\n//   }\r\n\r\n\r\n    return (\r\n      <div>\r\n          <Table\r\n    alignCellItems=\"center\"\r\n    columnsConfig=\"0.7fr 4fr 1.5fr 3fr 2fr\"\r\n    data={fileData}\r\n    \r\n    header={[\r\n      <span>#</span>,\r\n      <span>文件名</span>,\r\n      <span>文件大小(MB)</span>,\r\n      <span>创建者</span>,\r\n       \"\"\r\n    ]}\r\n    isColumnSortable={[\r\n      true,\r\n      true,\r\n      true,\r\n      true,\r\n      false\r\n    ]}\r\n    maxPages={3}\r\n    onPageNumberChanged={function noRefCheck(){}}\r\n    onRowClick={function noRefCheck(){}}\r\n    pageSize={5}\r\n  />\r\n      </div>\r\n    )\r\n\r\n  }\r\nexport default ShareTable;","import {Table, Avatar, Typography, Button} from \"web3uikit\"\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { useMoralis } from \"react-moralis\";\r\nimport axios from \"axios\";\r\n\r\nconst FileTable = ({isupdate}) => {\r\n\r\n  const [fileArr, setFileArray] = useState();\r\n  const [fileData, setFileData] = useState();\r\n  const { Moralis, account} = useMoralis();\r\n\r\n  useEffect(() => {\r\n    async function getFile() {\r\n        try {\r\n          const files = Moralis.Object.extend(\"fileStorage\");\r\n          const query = new Moralis.Query(files);\r\n          query.equalTo(\"shareFrom\", account);\r\n          query.equalTo(\"isVisible\", true);\r\n          // query.equalTo(\"isShare\",true);\r\n          const results = await query.find();\r\n  \r\n          setFileArray(results);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      }\r\n      getFile();\r\n      // console.log(fileArr);\r\n      const myfiles = fileArr;\r\n      const tableData=[];\r\n      {myfiles?.map(async (file) => {\r\n    \r\n        const name = file.attributes.fileName;\r\n        const crateTime = file.attributes.createdAt.toLocaleString('chinese',{hour12:false});\r\n        const owner = file.attributes.fileOwner.slice(0,10);\r\n        const size = file.attributes.fileSize ;\r\n        const size_KB = size / 1024;\r\n        const size_MB = size_KB /1024;\r\n        const size_show = size_MB.toFixed(1);\r\n        const fileID = file.id;\r\n        const btns =  <>\r\n        <Button color=\"blue\"  isTransparent size=\"small\" text=\"共享\" onClick={() => onEditbtn(fileID)}/>\r\n        <Button  icon=\"x\" iconColor=\"red\" iconLayout=\"icon-only\" isTransparent onClick={() => onDeletebtn(fileID)}/>\r\n        </>\r\n        const traceUrl = file.attributes.fileTrace;\r\n        // console.log(traceUrl);\r\n        const res = await axios.get(traceUrl);\r\n        const traceData = res.data;\r\n        // console.log(traceData);\r\n        {traceData?.map((trace) => {\r\n          // console.log(trace);\r\n          const from = trace.from.slice(0,10);\r\n          // console.log(from);\r\n          // if(from.length > 5) {\r\n          //   from = from.slice(0,4) + \"...\" + from.slice(38);\r\n          // }\r\n          const to = trace.to.slice(0,10);\r\n          // if(to.length > 5) {\r\n          //   to = to.slice(0,4) + \"...\" + to.slice(38);\r\n          // }\r\n          const timeStamp = trace.timeStamp;\r\n          // console.log(timeStamp);\r\n          \r\n        const data = [name, size_show, from, to, timeStamp];\r\n    \r\n        tableData.push(data);\r\n        })}\r\n        \r\n        tableData.reverse();\r\n      }\r\n      )}\r\n      setFileData(tableData);\r\n\r\n},[isupdate])\r\n\r\n  async function  onEditbtn(fileID) {\r\n    const files = Moralis.Object.extend(\"fileStorage\");\r\n    const query = new Moralis.Query(files);\r\n    query.equalTo(\"objectId\", fileID);\r\n    const results = await query.first();\r\n    results.set(\"isShare\", true);\r\n    await results.save()\r\n    console.log(results);\r\n\r\n  }\r\n\r\n  async function  onDeletebtn(fileID) {\r\n    const files = Moralis.Object.extend(\"fileStorage\");\r\n    const query = new Moralis.Query(files);\r\n    query.equalTo(\"objectId\", fileID);\r\n    const results = await query.first();\r\n    results.set(\"isVisible\", false);\r\n    await results.save()\r\n    console.log(results);\r\n\r\n  }\r\n\r\n\r\n    return (\r\n      <div>\r\n          <Table\r\n    alignCellItems=\"center\"\r\n    columnsConfig=\" 4fr 1.5fr 3fr 2fr 2fr\"\r\n    data={fileData}\r\n    \r\n    header={[\r\n      <span>文件名</span>,\r\n      <span>文件大小(MB)</span>,\r\n      <span>From</span>,\r\n      <span>to</span>,\r\n      <span>时间</span>\r\n    ]}\r\n    isColumnSortable={[\r\n      true,\r\n      true,\r\n      true,\r\n      true,\r\n      false\r\n    ]}\r\n    maxPages={3}\r\n    onPageNumberChanged={function noRefCheck(){}}\r\n    onRowClick={function noRefCheck(){}}\r\n    pageSize={5}\r\n  />\r\n      </div>\r\n    )\r\n\r\n  }\r\nexport default FileTable;","import { Table, Avatar, Typography, Button } from \"web3uikit\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { useMoralis, useMoralisFile } from \"react-moralis\";\r\nimport axios from \"axios\";\r\n\r\nconst GetTable = ({ isupdate }) => {\r\n  const [fileArr, setFileArray] = useState();\r\n  const [fileData, setFileData] = useState();\r\n  const { Moralis, account } = useMoralis();\r\n  const user = Moralis.User.current();\r\n  const { saveFile } = useMoralisFile();\r\n\r\n  useEffect(() => {\r\n    async function getFile() {\r\n      try {\r\n        const fileListUrl = user.attributes.fileList;\r\n        // console.log(fileListUrl);\r\n        const results = await axios.get(fileListUrl);\r\n        const files = results.data;\r\n        setFileArray(files);\r\n        //   console.log(fileArr);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n    getFile();\r\n    //   console.log(fileArr);\r\n    const myfiles = fileArr;\r\n    const tableData = [];\r\n    {\r\n      myfiles?.map((file, i) => {\r\n        const name = file.fileName;\r\n        const owner = file.owner.slice(0, 10);\r\n        const size = file.size;\r\n        const size_KB = size / 1024;\r\n        const size_MB = size_KB / 1024;\r\n        const size_show = size_MB.toFixed(1);\r\n        const fileID = file.ID;\r\n        const address = file.address;\r\n        const btns = (\r\n          <>\r\n            <Button\r\n              color=\"blue\"\r\n              isTransparent\r\n              size=\"small\"\r\n              text=\"共享\"\r\n              onClick={() => onEditbtn(fileID)}\r\n            />\r\n            <Button\r\n              icon=\"download\"\r\n              iconColor=\"blue\"\r\n              iconLayout=\"icon-only\"\r\n              isTransparent\r\n              onClick={() => onDownloadbtn(fileID, address)}\r\n            />\r\n          </>\r\n        );\r\n        const data = [i + 1, name, size_show, owner, btns];\r\n\r\n        tableData.push(data);\r\n      });\r\n    }\r\n    //   console.log(tableData.reverse());\r\n    setFileData(tableData);\r\n  }, [isupdate]);\r\n\r\n  async function onEditbtn(fileID) {\r\n    const files = Moralis.Object.extend(\"fileStorage\");\r\n    const newfile = new files();\r\n    const query = new Moralis.Query(files);\r\n    query.equalTo(\"objectId\", fileID);\r\n    const results = await query.first();\r\n\r\n    newfile.set(\"fileTrace\", results.attributes.fileTrace);\r\n    newfile.set(\"fileAddress\", results.attributes.fileAddress);\r\n    newfile.set(\"fileName\", results.attributes.fileName);\r\n    newfile.set(\"fileSize\", results.attributes.fileSize);\r\n    newfile.set(\"fileOwner\", results.attributes.fileOwner);\r\n    newfile.set(\"shareFrom\", user.attributes.ethAddress);\r\n    newfile.set(\"isVisible\", true);\r\n    newfile.set(\"isShare\", true);\r\n\r\n    await newfile.save();\r\n    alert(\"文件已共享！\");\r\n  }\r\n\r\n  async function onDownloadbtn(fileID, address) {\r\n    window.open(address);\r\n\r\n    //将记录添加到trace数据中\r\n    const files = Moralis.Object.extend(\"fileStorage\");\r\n    const query = new Moralis.Query(files);\r\n    query.equalTo(\"objectId\", fileID);\r\n    const results = await query.first();\r\n    const traceUrl = results.attributes.fileTrace;\r\n    const shareFrom = user.attributes.ethAddress;\r\n    // console.log(traceUrl);\r\n\r\n    const date = new Date();\r\n    const currentTime = date.toLocaleString(\"zh\", {\r\n      timeZone: \"Asia/Shanghai\",\r\n    });\r\n    const res = await axios.get(traceUrl);\r\n    const traceData = res.data;\r\n    const newTrace = {\r\n      from: shareFrom,\r\n      to: \"local\",\r\n      timeStamp: currentTime,\r\n    };\r\n    console.log(newTrace);\r\n    traceData.push(newTrace);\r\n    const JSONTrace = await saveFile(\r\n      \"fileTrace.json\",\r\n      { base64: btoa(JSON.stringify(traceData)) },\r\n      {\r\n        type: \"base64\",\r\n        saveIPFS: true,\r\n      }\r\n    );\r\n    console.log(JSONTrace.ipfs());\r\n    results.set(\"fileTrace\", JSONTrace.ipfs());\r\n    // console.log(traceData);\r\n\r\n    // results.set(\"isShare\", true);\r\n    await results.save();\r\n    console.log(\"下载成功\");\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Table\r\n        alignCellItems=\"center\"\r\n        columnsConfig=\"0.7fr 4fr 1.5fr 3fr 2fr\"\r\n        data={fileData}\r\n        header={[\r\n          <span>#</span>,\r\n          <span>文件名</span>,\r\n          <span>文件大小(MB)</span>,\r\n          <span>创建者</span>,\r\n          \"\",\r\n        ]}\r\n        isColumnSortable={[true, true, true, true, false]}\r\n        maxPages={3}\r\n        onPageNumberChanged={function noRefCheck() {}}\r\n        onRowClick={function noRefCheck() {}}\r\n        pageSize={5}\r\n      />\r\n    </div>\r\n  );\r\n};\r\nexport default GetTable;\r\n","import React from \"react\";\r\nimport \"./Profile.css\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport {\r\n  useMoralis,\r\n  useWeb3ExecuteFunction,\r\n  useMoralisFile,\r\n} from \"react-moralis\";\r\nimport { Icon, Button } from \"web3uikit\";\r\nimport FileTable from \"../components/FileTable\";\r\nimport ShareTable from \"../components/ShareTable\";\r\nimport StreamTable from \"../components/StreamTable\";\r\nimport GetTable from \"../components/GetTable\";\r\n\r\nconst Profile = () => {\r\n  const inputFile = useRef(null);\r\n  const [theFile, setTheFile] = useState();\r\n  const [selectFile, setSelectFile] = useState();\r\n  const [fileArr, setFileArray] = useState();\r\n\r\n  const { saveFile } = useMoralisFile();\r\n\r\n  const [Isupdate, setUpdata] = useState(false);\r\n\r\n  const { Moralis, account } = useMoralis();\r\n  const user = Moralis.User.current();\r\n  // await Moralis.enableWeb3();\r\n  const contractProcessor = useWeb3ExecuteFunction();\r\n\r\n  const changeHandler = (event) => {\r\n    const file = event.target.files[0];\r\n    setTheFile(file);\r\n    setSelectFile(file.name);\r\n  };\r\n\r\n  // save file to IPFS\r\n  const uploadFile = async () => {\r\n    const myFiles = Moralis.Object.extend(\"fileStorage\");\r\n    const newfile = new myFiles();\r\n\r\n    if (theFile) {\r\n      const data = theFile;\r\n      const file = new Moralis.File(data.name, data);\r\n      await file.saveIPFS();\r\n      const ipfsAddress = file.ipfs();\r\n      const date = new Date();\r\n      const currentTime = date.toLocaleString(\"zh\", {\r\n        timeZone: \"Asia/Shanghai\",\r\n      });\r\n      const fileTrace = [\r\n        {\r\n          from: \"local\",\r\n          to: user.attributes.ethAddress,\r\n          timeStamp: currentTime,\r\n        },\r\n      ];\r\n      const JSONTrace = await saveFile(\r\n        \"fileTrace.json\",\r\n        { base64: btoa(JSON.stringify(fileTrace)) },\r\n        {\r\n          type: \"base64\",\r\n          saveIPFS: true,\r\n        }\r\n      );\r\n      newfile.set(\"fileTrace\", JSONTrace.ipfs());\r\n      newfile.set(\"fileAddress\", ipfsAddress);\r\n      newfile.set(\"fileName\", data.name);\r\n      newfile.set(\"fileSize\", data.size);\r\n      newfile.set(\"fileOwner\", user.attributes.ethAddress);\r\n      newfile.set(\"shareFrom\", user.attributes.ethAddress);\r\n      newfile.set(\"isVisible\", true);\r\n      newfile.set(\"isShare\", false);\r\n      //save file to server\r\n      await newfile.save();\r\n    }\r\n    alert(\"文件上传成功！\");\r\n    window.location.reload();\r\n    setUpdata(!Isupdate);\r\n  };\r\n\r\n  const Update = () => {\r\n    setUpdata(!Isupdate);\r\n  };\r\n\r\n  const onSelecterClick = () => {\r\n    inputFile.current.click();\r\n  };\r\n\r\n  useEffect(() => {\r\n    setUpdata(!Isupdate);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className=\"pageIdentify\">个人中心</div>\r\n        <div className=\"mainContent\">\r\n          <div className=\"fileList\">\r\n            <div className=\"title-box\">\r\n              <div className=\"title\">我的文件</div>\r\n              <div className=\"post\" onClick={Update}>\r\n                更新\r\n                <Icon fill=\"#ffffff\" size={20} svg=\"reload\" />\r\n              </div>\r\n            </div>\r\n            <FileTable isupdate={Isupdate}></FileTable>\r\n          </div>\r\n\r\n          <div className=\"fileList\">\r\n            <div className=\"title-box\">\r\n              <div className=\"title\">已共享的文件</div>\r\n              <div className=\"post\" onClick={Update}>\r\n                更新\r\n                <Icon fill=\"#ffffff\" size={20} svg=\"reload\" />\r\n              </div>\r\n            </div>\r\n            <ShareTable isupdate={Isupdate}></ShareTable>\r\n          </div>\r\n\r\n          <div className=\"fileList\">\r\n            <div className=\"title-box\">\r\n              <div className=\"title\">获取的文件</div>\r\n              <div className=\"post\" onClick={Update}>\r\n                更新\r\n                <Icon fill=\"#ffffff\" size={20} svg=\"reload\" />\r\n              </div>\r\n            </div>\r\n            <GetTable isupdate={Isupdate}></GetTable>\r\n          </div>\r\n\r\n          <div className=\"fileList\">\r\n            <div className=\"title-box\">\r\n              <div className=\"title\">文件流</div>\r\n              <div className=\"post\" onClick={Update}>\r\n                更新\r\n                <Icon fill=\"#ffffff\" size={20} svg=\"reload\" />\r\n              </div>\r\n            </div>\r\n            <StreamTable isupdate={Isupdate}></StreamTable>\r\n          </div>\r\n\r\n          <div className=\"title-box\">\r\n            <div className=\"title\">上传文件</div>\r\n          </div>\r\n          <div className=\"btn-box\">\r\n            <div className=\"choose-file\">\r\n              <div className=\"post\" onClick={onSelecterClick}>\r\n                选择文件\r\n              </div>\r\n              <input\r\n                type=\"file\"\r\n                name=\"file\"\r\n                ref={inputFile}\r\n                onChange={changeHandler}\r\n                style={{ display: \"none\" }}\r\n              ></input>\r\n              <div\r\n                className=\"post\"\r\n                onClick={uploadFile}\r\n                style={{ backgroundColor: \"#8247e5\" }}\r\n              >\r\n                上传\r\n                <Icon fill=\"#ffffff\" size={20} svg=\"checkmark\"></Icon>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"fileName\">\r\n            {/* <Icon fill=\"#ffffff\" size={20} svg=\"file\" ></Icon> */}\r\n            <h3>{selectFile}</h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React from \"react\";\r\nimport \"./Settings.css\";\r\nimport { useState, useRef } from \"react\";\r\nimport { Input, TextArea, Button } from \"web3uikit\";\r\nimport { useMoralis } from \"react-moralis\";\r\n\r\nconst Settings = () => {\r\n  const inputFile = useRef(null);\r\n  const [selectedFile, setSelectedFile] = useState();\r\n\r\n  const [theFile, setTheFile] = useState();\r\n  const [username, setUserName] = useState();\r\n  const [name, setName] = useState();\r\n  const [email, setMail] = useState();\r\n  const [bio, setBio] = useState();\r\n  const [institute, setInsti] = useState();\r\n  const [job, setJob] = useState();\r\n  const { Moralis } = useMoralis();\r\n  const [isUpdataed, setUpdate] = useState(false);\r\n  const user = Moralis.User.current();\r\n\r\n  const onBtnClick = () => {\r\n    inputFile.current.click();\r\n  };\r\n\r\n  const changeHandler = (event) => {\r\n    const img = event.target.files[0];\r\n    setTheFile(img);\r\n    setSelectedFile(URL.createObjectURL(img));\r\n  };\r\n\r\n  const saveEdits = async () => {\r\n    const User = Moralis.Object.extend(\"_User\");\r\n    const query = new Moralis.Query(User);\r\n    const myDetails = await query.first();\r\n\r\n    if (username) {\r\n      myDetails.set(\"username\", username);\r\n    }\r\n\r\n    if (name) {\r\n      myDetails.set(\"name\", name);\r\n    }\r\n    if (email) {\r\n      myDetails.set(\"email\", email);\r\n    }\r\n    if (institute) {\r\n      myDetails.set(\"institute\", institute);\r\n    }\r\n    if (bio) {\r\n      myDetails.set(\"bio\", bio);\r\n    }\r\n    if (job) {\r\n      myDetails.set(\"job\", job);\r\n    }\r\n\r\n    if (theFile) {\r\n      const data = theFile;\r\n      const file = new Moralis.File(data.name, data);\r\n      await file.saveIPFS();\r\n      myDetails.set(\"profilePic\", file.ipfs());\r\n    }\r\n    await myDetails.save();\r\n    setUpdate(true);\r\n    window.location.reload();\r\n  };\r\n\r\n  // const init = () => {\r\n\r\n  //   const _username = user.attributes.username;\r\n  //   const _ethAddress = user.attributes.ethAddress;\r\n  //   const _bio = user.attributes.bio;\r\n  //   const _name = user.attributes.name;\r\n  //   const _email = user.attributes.email;\r\n  //   const _institute = user.attributes.institute;\r\n  //   const _job = user.attributes.job;\r\n  //   setUserName(_username);\r\n  //   setBio(_bio);\r\n  //   setName(_name);\r\n  //   setMail(_email);\r\n  //   setInsti(_institute);\r\n  //   setJob(_job);\r\n  //   console.log(\"initial\")\r\n  // }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"pageIdentify\">设置</div>\r\n      <div className=\"settingsPage\">\r\n        <div className=\"title\">账户</div>\r\n        <div className=\"accountBox\">\r\n          <img\r\n            className=\"profilepic-large\"\r\n            src={selectedFile ? selectedFile : user.attributes.profilePic}\r\n          ></img>\r\n          <div className=\"editBox\">\r\n            <div className=\"btnBox\" onClick={onBtnClick}>\r\n              <input\r\n                type=\"file\"\r\n                name=\"file\"\r\n                ref={inputFile}\r\n                onChange={changeHandler}\r\n                style={{ display: \"none\" }}\r\n              ></input>\r\n              <Button\r\n                color=\"blue\"\r\n                id=\"changePic\"\r\n                text=\"更换头像\"\r\n                theme=\"secondary\"\r\n                type=\"button\"\r\n              />\r\n            </div>\r\n            <div className=\"input-box-text\">\r\n              <div className=\"input-title\">昵称</div>\r\n              <Input\r\n                label=\"\"\r\n                value={isUpdataed ? username : user.attributes.username}\r\n                width=\"20%\"\r\n                labelBgColor=\"#141d26\"\r\n                onChange={(e) => setUserName(e.target.value)}\r\n              ></Input>\r\n            </div>\r\n            <div>\r\n              <div className=\"input-title\">账户地址：</div>\r\n              <div className=\"text-italic\">{user.attributes.ethAddress}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"title\">个人简介</div>\r\n        <TextArea\r\n          width=\"100%\"\r\n          value={isUpdataed ? bio : user.attributes.bio}\r\n          onChange={(e) => setBio(e.target.value)}\r\n        ></TextArea>\r\n        <div className=\"title\">个人信息</div>\r\n        <div className=\"inputBoxs\">\r\n          <div className=\"inputBox\">\r\n            <div className=\"input-box-text\">\r\n              <div className=\"input-title\">姓名</div>\r\n              <Input\r\n                label=\"\"\r\n                name=\"NameChange\"\r\n                value={isUpdataed ? name : user.attributes.name}\r\n                width=\"100%\"\r\n                labelBgColor=\"#141d26\"\r\n                onChange={(e) => setName(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"input-box-text\">\r\n              <div className=\"input-title\">邮箱</div>\r\n              <Input\r\n                label=\"\"\r\n                name=\"MailChange\"\r\n                value={isUpdataed ? email : user.attributes.email}\r\n                width=\"100%\"\r\n                labelBgColor=\"#141d26\"\r\n                onChange={(e) => setMail(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"inputBox\">\r\n            <div className=\"input-box-text\">\r\n              <div className=\"input-title\">单位</div>\r\n              <Input\r\n                label=\"\"\r\n                name=\"instiChange\"\r\n                value={isUpdataed ? institute : user.attributes.institute}\r\n                width=\"100%\"\r\n                labelBgColor=\"#141d26\"\r\n                onChange={(e) => setInsti(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"input-box-text\">\r\n              <div className=\"input-title\">职务</div>\r\n              <Input\r\n                label=\"\"\r\n                name=\"jobChange\"\r\n                value={isUpdataed ? job : user.attributes.job}\r\n                width=\"100%\"\r\n                labelBgColor=\"#141d26\"\r\n                onChange={(e) => setJob(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"save\" onClick={() => saveEdits()}>\r\n          保存\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","export default __webpack_public_path__ + \"static/media/rubick.9d209c95.png\";","import React from \"react\";\r\nimport \"./Sidebar.css\";\r\nimport { Icon } from \"web3uikit\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useMoralis } from \"react-moralis\";\r\nimport { defaultImgs } from \"../defaultimgs\";\r\nimport Logo from \"../images/rubick.png\";\r\nimport { useState } from \"react\";\r\n\r\nconst Sidebar = () => {\r\n  const { Moralis } = useMoralis();\r\n  const user = Moralis.User.current();\r\n  const mylogo = Logo;\r\n  const [clickCounter, setCounter] = useState(0);\r\n\r\n  const clickLogo = () => {\r\n    let count = clickCounter;\r\n    count = count + 1;\r\n    if (count === 9) {\r\n      alert(\r\n        \"恭喜你发现彩蛋：fileSynergy-beta版上线的时间正好是作者的生日哦~~~~~~~~~~\"\r\n      );\r\n      setCounter(0);\r\n    }\r\n    setCounter(count);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"siderContent\">\r\n        <div className=\"menu\">\r\n          <div className=\"details\">\r\n            <img\r\n              src={mylogo}\r\n              className=\"myLogo\"\r\n              alt=\"\"\r\n              onClick={clickLogo}\r\n            ></img>\r\n          </div>\r\n\r\n          <Link to=\"/\" className=\"link\">\r\n            <div className=\"menuItems\">\r\n              <Icon fill=\"#ffffff\" size={33} svg=\"list\" />\r\n              主页\r\n            </div>\r\n          </Link>\r\n\r\n          <Link to=\"/profile\" className=\"link\">\r\n            <div className=\"menuItems\">\r\n              <Icon fill=\"#ffffff\" size={33} svg=\"user\" />\r\n              个人中心\r\n            </div>\r\n          </Link>\r\n\r\n          <Link to=\"/settings\" className=\"link\">\r\n            <div className=\"menuItems\">\r\n              <Icon fill=\"#ffffff\" size={33} svg=\"cog\" />\r\n              设置\r\n            </div>\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"details\">\r\n          <img\r\n            src={\r\n              user.attributes.profilePic\r\n                ? user.attributes.profilePic\r\n                : defaultImgs[2]\r\n            }\r\n            className=\"profilePic\"\r\n          ></img>\r\n          <div className=\"profile\">\r\n            <div className=\"who\">{user.attributes.username.slice(0, 6)}</div>\r\n            <div className=\"accWhen\">\r\n              {`${user.attributes.ethAddress.slice(\r\n                0,\r\n                4\r\n              )}...${user.attributes.ethAddress.slice(38)}`}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n","import React from \"react\";\r\nimport \"./Message.css\";\r\nimport { defaultImgs } from \"../defaultimgs\";\r\nimport { useMoralis } from \"react-moralis\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst Message = () => {\r\n  const { Moralis, account } = useMoralis();\r\n  const user = Moralis.User.current();\r\n\r\n  const [messageArr, setMessageArr] = useState();\r\n\r\n  useEffect(() => {\r\n    async function getMessages() {\r\n      try {\r\n        const Messages = Moralis.Object.extend(\"Message\");\r\n        const query = new Moralis.Query(Messages);\r\n        const results = await query.find();\r\n        const limit7 = results?.slice(-7);\r\n        setMessageArr(limit7);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n    getMessages();\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {messageArr\r\n        ?.map((e) => {\r\n          return (\r\n            <>\r\n              <div className=\"messageBox\">\r\n                <img\r\n                  src={\r\n                    e.attributes.messageUserPic\r\n                      ? e.attributes.messageUserPic\r\n                      : defaultImgs[2]\r\n                  }\r\n                  className=\"profilepic-small\"\r\n                ></img>\r\n                <div className=\"messages\">\r\n                  <div className=\"userName\">\r\n                    {e.attributes.messageUserName}\r\n                    <div className=\"time\">\r\n                      {`${e.attributes.messageAcc.slice(\r\n                        0,\r\n                        4\r\n                      )}...${e.attributes.messageAcc.slice(38)} at\r\n                                ${e.attributes.createdAt.toLocaleString(\r\n                                  \"en-us\",\r\n                                  { month: \"short\" }\r\n                                )}  \r\n                                ${e.attributes.createdAt.toLocaleString(\r\n                                  \"en-us\",\r\n                                  { day: \"numeric\" }\r\n                                )}\r\n                                `}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"messageContent\">\r\n                    {e.attributes.messageTxt}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </>\r\n          );\r\n        })\r\n        .reverse()}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n\r\n{\r\n  /* <div>\r\n            <div className=\"messageBox\">\r\n                <img src={defaultImgs[2]} className=\"profilepic-small\"></img>\r\n                <div className=\"messages\">\r\n                    <div className=\"userName\">\r\n                        Wangqi\r\n                        <div className=\"time\">0x42..314  1h</div>\r\n                    </div>\r\n                    <div className=\"messageContent\">\r\n                    Hello World！\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"messageBox\">\r\n                <img src={defaultImgs[3]} className=\"profilepic-small\"></img>\r\n                <div className=\"messages\">\r\n                    <div className=\"userName\">\r\n                        Wangqi\r\n                        <div className=\"time\">0x42..314  1h</div>\r\n                    </div>\r\n                    <div className=\"messageContent\">\r\n                    Hello World！\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"messageBox\">\r\n                <img src={defaultImgs[2]} className=\"profilepic-small\"></img>\r\n                <div className=\"messages\">\r\n                    <div className=\"userName\">\r\n                        Wangqi\r\n                        <div className=\"time\">0x42..314  1h</div>\r\n                    </div>\r\n                    <div className=\"messageContent\">\r\n                    Hello World！\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"messageBox\">\r\n                <img src={defaultImgs[3]} className=\"profilepic-small\"></img>\r\n                <div className=\"messages\">\r\n                    <div className=\"userName\">\r\n                        Wangqi\r\n                        <div className=\"time\">0x42..314  1h</div>\r\n                    </div>\r\n                    <div className=\"messageContent\">\r\n                    Hello World！\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"messageBox\">\r\n                <img src={defaultImgs[4]} className=\"profilepic-small\"></img>\r\n                <div className=\"messages\">\r\n                    <div className=\"userName\">\r\n                        Wangqi\r\n                        <div className=\"time\">0x42..314  1h</div>\r\n                    </div>\r\n                    <div className=\"messageContent\">\r\n                    Hello World！\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div> */\r\n}\r\n","import React from \"react\";\r\nimport \"./Rightbar.css\";\r\nimport { TextArea, Icon } from \"web3uikit\";\r\nimport { useMoralis } from \"react-moralis\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Message from \"./Message\";\r\n\r\nconst Rightbar = () => {\r\n  const { Moralis } = useMoralis();\r\n  const user = Moralis.User.current();\r\n\r\n  const [message, setMessage] = useState();\r\n\r\n  async function saveMessage() {\r\n    if (!message) return;\r\n    const Messages = Moralis.Object.extend(\"Message\");\r\n    const newMessage = new Messages();\r\n    newMessage.set(\"messageTxt\", message);\r\n    newMessage.set(\"messageUserName\", user.attributes.username);\r\n    newMessage.set(\"messageAcc\", user.attributes.ethAddress);\r\n    newMessage.set(\"messageUserPic\", user.attributes.profilePic);\r\n\r\n    await newMessage.save();\r\n    window.location.reload();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"rightbarContent\">\r\n        <div className=\"messageBoard\">\r\n          <nav className=\"nav-text\">留言板</nav>\r\n          <div className=\"textArea\">\r\n            <TextArea\r\n              label=\"\"\r\n              name=\"messageTxtArea\"\r\n              type=\"text\"\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              width=\"95%\"\r\n            ></TextArea>\r\n          </div>\r\n\r\n          <div className=\"post-btn\" onClick={saveMessage}>\r\n            <div className=\"post\">\r\n              <Icon fill=\"#ffffff\" size={20} svg=\"telegram\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"messageTabs\">\r\n            <div className=\"messageTab\">最新留言</div>\r\n          </div>\r\n          <Message></Message>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Rightbar;\r\n","import React from \"react\";\r\nimport { Routes, Route } from \"react-router-dom\";\r\nimport Home from \"./pages/Home\";\r\nimport Profile from \"./pages/Profile\";\r\nimport Settings from \"./pages/Settings\";\r\nimport Sidebar from \"./components/Sidebar\";\r\nimport Rightbar from \"./components/Rightbar\";\r\nimport \"./App.css\";\r\nimport { useMoralis } from \"react-moralis\";\r\nimport { ConnectButton, Icon } from \"web3uikit\";\r\nimport Logo from \"./images/rubick.png\";\r\nimport { useState } from \"react\";\r\n\r\nconst App = () => {\r\n  const { isAuthenticated, Moralis } = useMoralis();\r\n  const mylogo = Logo;\r\n\r\n  return (\r\n    <>\r\n      {isAuthenticated ? (\r\n        <div className=\"page\">\r\n          <div className=\"sideBar\">\r\n            <Sidebar />\r\n            <div\r\n              className=\"logout\"\r\n              onClick={() => {\r\n                Moralis.User.logOut().then(() => {\r\n                  window.location.reload();\r\n                });\r\n              }}\r\n            >\r\n              <div className=\"menuItems\">\r\n                退出\r\n                <Icon fill=\"#ffffff\" size={33} svg=\"logOut\" />\r\n              </div>\r\n            </div>\r\n            <footer className=\"footer-text\">\r\n              <h4>©Copyright THU-WangQi 2022 </h4>\r\n            </footer>\r\n          </div>\r\n          <div className=\"mainWindow\">\r\n            <Routes>\r\n              <Route path=\"/\" element={<Home />} />\r\n              <Route path=\"/profile\" element={<Profile />} />\r\n              <Route path=\"/settings\" element={<Settings />} />\r\n            </Routes>\r\n          </div>\r\n          <div className=\"rightBar\">\r\n            <Rightbar />\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"loginPage\">\r\n          <img className=\"myLogo\" src={mylogo} alt=\"\"></img>\r\n          <ConnectButton />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { MoralisProvider } from \"react-moralis\";\r\nimport { NotificationProvider } from 'web3uikit';\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <MoralisProvider appId=\"6cSvnXGIKw65FBHDFhSRBrb6RQd3HLQ6LveTCMQs\" serverUrl=\"https://srmoi8g1vyww.usemoralis.com:2053/server\">\r\n      <NotificationProvider>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n      </NotificationProvider>\r\n    </MoralisProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}