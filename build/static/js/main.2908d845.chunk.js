(this.webpackJsonpsynergy=this.webpackJsonpsynergy||[]).push([[4],{1035:function(e,t){},1037:function(e,t){},1057:function(e,t){},1059:function(e,t){},1071:function(e,t){},1072:function(e,t){},1086:function(e,t){},1089:function(e,t){},1091:function(e,t){},1172:function(e,t){},1200:function(e,t){},1202:function(e,t){},1210:function(e,t){},1231:function(e,t){},1233:function(e,t){},1238:function(e,t){},1240:function(e,t){},1247:function(e,t){},1259:function(e,t){},1262:function(e,t){},1275:function(e,t){},1346:function(e,t,s){},1347:function(e,t,s){},1348:function(e,t,s){},1349:function(e,t,s){},1350:function(e,t,s){},1351:function(e,t,s){},1352:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(205),i=s.n(a),r=(s(660),s(33)),l=s(16),o=(s(661),["https://ipfs.moralis.io:2053/ipfs/QmNgA9MNWFfRaoKzBt21VghQopnKXBgVxzyGvv5qjsV4Vw/media/1","https://ipfs.moralis.io:2053/ipfs/QmNgA9MNWFfRaoKzBt21VghQopnKXBgVxzyGvv5qjsV4Vw/media/2","https://ipfs.moralis.io:2053/ipfs/QmVW594boVgfCpdo1pq9fmn9GhwwbHn4cL2jMn6bPFNuTv","https://ipfs.moralis.io:2053/ipfs/QmWectmwttyxmbu1FQWZanECd9NFwyPHpEHSFib9fAiDjj","https://ipfs.moralis.io:2053/ipfs/QmbfZwB8Ur6CzzPVeFm6rYCMgWDwxo5vji5GgXxvYweaxV"]),u=s(24),j=s(26),b=s(1),f=s(9),d=s(108),O=s.n(d),x=s(3),h=function(e){var t=e.isupdate,s=Object(n.useState)(),c=Object(l.a)(s,2),a=c[0],i=c[1],r=Object(n.useState)(),o=Object(l.a)(r,2),d=o[0],h=o[1],p=Object(j.c)(),m=p.Moralis,v=(p.account,m.User.current()),g=Object(j.d)().saveFile;function N(){return(N=Object(f.a)(Object(b.a)().mark((function e(t){var s,n,c,a,i,r,l,o,u,j,f,d,x,h,p,N,w,S,y,C;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.Object.extend("fileStorage"),(n=new m.Query(s)).equalTo("objectId",t),e.next=5,n.first();case 5:return c=e.sent,a=m.Object.extend("_User"),i=new m.Query(a),e.next=10,i.first();case 10:if(r=e.sent,l=r.attributes.fileList,o=[],!l){e.next=20;break}return e.next=16,O.a.get(l);case 16:u=e.sent,(j=u.data).map((function(e){o.push(e)})),console.log(j);case 20:return f={ID:t,size:c.attributes.fileSize,fileName:c.attributes.fileName,owner:c.attributes.fileOwner,address:c.attributes.fileAddress},o.push(f),e.next=24,g("fileList.json",{base64:btoa(JSON.stringify(o))},{type:"base64",saveIPFS:!0});case 24:return d=e.sent,console.log(o),r.set("fileList",d.ipfs()),console.log(d.ipfs()),e.next=30,r.save();case 30:return x=c.attributes.fileTrace,h=c.attributes.shareFrom,p=new Date,N=p.toLocaleString("zh",{timeZone:"Asia/Shanghai"}),e.next=36,O.a.get(x);case 36:return w=e.sent,S=w.data,y={from:h,to:v.attributes.ethAddress,timeStamp:N},S.push(y),e.next=42,g("fileTrace.json",{base64:btoa(JSON.stringify(S))},{type:"base64",saveIPFS:!0});case 42:return C=e.sent,c.set("fileTrace",C.ipfs()),e.next=46,c.save();case 46:alert("\u83b7\u53d6\u6587\u4ef6\u6210\u529f\uff01");case 47:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(Object(b.a)().mark((function e(){var t,s,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=m.Object.extend("fileStorage"),(s=new m.Query(t)).equalTo("isShare",!0),e.next=6,s.find();case 6:n=e.sent,i(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}();var t=[];null===a||void 0===a||a.map((function(e,s){var n=e.attributes.fileName,c=e.attributes.fileOwner.slice(0,10),a=e.attributes.shareFrom.slice(0,10),i=e.id,r=(e.attributes.fileSize/1024/1024).toFixed(1),l=Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(u.a,{color:"blue",isTransparent:!0,size:"small",text:"\u83b7\u53d6",onClick:function(){return function(e){return N.apply(this,arguments)}(i)}})}),o=[s+1,n,r,c,a,l];t.push(o)})),h(t)}),[t]),Object(x.jsx)("div",{children:Object(x.jsx)(u.f,{alignCellItems:"center",columnsConfig:"0.7fr 4fr 1.5fr 3fr 3fr 2fr",data:d,header:[Object(x.jsx)("span",{children:"#"}),Object(x.jsx)("span",{children:"\u6587\u4ef6\u540d"}),Object(x.jsx)("span",{children:"\u6587\u4ef6\u5927\u5c0f(MB)"}),Object(x.jsx)("span",{children:"\u521b\u5efa\u8005"}),Object(x.jsx)("span",{children:"\u5171\u4eab\u8005"}),""],isColumnSortable:[!0,!0,!0,!0,!1],maxPages:3,onPageNumberChanged:function(){},onRowClick:function(){},pageSize:5})})},p=function(e){var t=e.isupdate,s=Object(n.useState)(),c=Object(l.a)(s,2),a=c[0],i=c[1],r=Object(n.useState)(),o=Object(l.a)(r,2),d=o[0],h=o[1],p=Object(j.c)(),m=p.Moralis;p.account;return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(Object(b.a)().mark((function e(){var t,s,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=m.Object.extend("fileStorage"),(s=new m.Query(t)).equalTo("isVisible",!0),e.next=6,s.find();case 6:n=e.sent,i(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}();var t=[];null===a||void 0===a||a.map(function(){var e=Object(f.a)(Object(b.a)().mark((function e(s){var n,c,a,i,r,l;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.attributes.fileName,s.attributes.createdAt.toLocaleString("chinese",{hour12:!1}),s.attributes.fileOwner.slice(0,10),c=s.attributes.fileSize,a=(c/1024/1024).toFixed(1),s.id,i=s.attributes.fileTrace,console.log(i),e.next=12,O.a.get(i);case 12:r=e.sent,l=r.data,console.log(l),null===l||void 0===l||l.map((function(e){var s=e.from.slice(0,10),c=e.to.slice(0,10),i=e.timeStamp,r=[n,a,s,c,i];t.push(r)})),t.reverse(),console.log(t);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(t)}),[t]),Object(x.jsx)("div",{children:Object(x.jsx)(u.f,{alignCellItems:"center",columnsConfig:" 4fr 1.5fr 3fr 2fr 2fr",data:d,header:[Object(x.jsx)("span",{children:"\u6587\u4ef6\u540d"}),Object(x.jsx)("span",{children:"\u6587\u4ef6\u5927\u5c0f(MB)"}),Object(x.jsx)("span",{children:"From"}),Object(x.jsx)("span",{children:"to"}),Object(x.jsx)("span",{children:"\u65f6\u95f4"})],isColumnSortable:[!0,!0,!0,!0,!0],maxPages:3,onPageNumberChanged:function(){},onRowClick:function(){},pageSize:5})})},m=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),s=t[0],c=t[1],a=function(){c(!s)};return Object(n.useEffect)((function(){c(!s)}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"pageIdentify",children:"\u6570\u636e\u5e02\u573a"}),Object(x.jsxs)("div",{className:"mainContent",children:[Object(x.jsxs)("div",{className:"fileList",children:[Object(x.jsxs)("div",{className:"title-box",children:[Object(x.jsx)("div",{className:"title",children:"\u6587\u4ef6\u5217\u8868"}),Object(x.jsxs)("div",{className:"post",onClick:a,children:["\u66f4\u65b0",Object(x.jsx)(u.c,{fill:"#ffffff",size:20,svg:"reload"})]})]}),Object(x.jsx)(h,{isupdate:s})]}),Object(x.jsxs)("div",{className:"fileList",children:[Object(x.jsxs)("div",{className:"title-box",children:[Object(x.jsx)("div",{className:"title",children:"\u4f20\u8f93\u8bb0\u5f55"}),Object(x.jsxs)("div",{className:"post",onClick:a,children:["\u66f4\u65b0",Object(x.jsx)(u.c,{fill:"#ffffff",size:20,svg:"reload"})]})]}),Object(x.jsx)(p,{isupdate:s})]})]})]})})},v=(s(1346),function(e){var t=e.isupdate,s=Object(n.useState)(),c=Object(l.a)(s,2),a=c[0],i=c[1],r=Object(n.useState)(),o=Object(l.a)(r,2),d=o[0],O=o[1],h=Object(j.c)(),p=h.Moralis,m=h.account;function v(){return(v=Object(f.a)(Object(b.a)().mark((function e(t){var s,n,c;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.Object.extend("fileStorage"),(n=new p.Query(s)).equalTo("objectId",t),e.next=5,n.first();case 5:return(c=e.sent).set("isShare",!0),e.next=9,c.save();case 9:alert("\u6587\u4ef6\u5df2\u5171\u4eab\uff01");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(f.a)(Object(b.a)().mark((function e(t){var s,n,c;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.Object.extend("fileStorage"),(n=new p.Query(s)).equalTo("objectId",t),e.next=5,n.first();case 5:return(c=e.sent).set("isVisible",!1),e.next=9,c.save();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(Object(b.a)().mark((function e(){var t,s,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=p.Object.extend("fileStorage"),(s=new p.Query(t)).equalTo("fileOwner",m),s.equalTo("isVisible",!0),e.next=7,s.find();case 7:n=e.sent,i(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}();var t=[];null===a||void 0===a||a.map((function(e,s){var n=e.attributes.fileName,c=e.attributes.createdAt.toLocaleString("chinese",{hour12:!1}),a=(e.attributes.fileOwner.slice(0,10),(e.attributes.fileSize/1024/1024).toFixed(1)),i=e.id,r=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(u.a,{color:"blue",isTransparent:!0,size:"small",text:"\u5171\u4eab",onClick:function(){return function(e){return v.apply(this,arguments)}(i)}}),Object(x.jsx)(u.a,{icon:"x",iconColor:"red",iconLayout:"icon-only",isTransparent:!0,onClick:function(){return function(e){return g.apply(this,arguments)}(i)}})]}),l=[s+1,n,a,c,r];t.push(l)})),O(t)}),[t]),Object(x.jsx)("div",{children:Object(x.jsx)(u.f,{alignCellItems:"center",columnsConfig:"0.7fr 4fr 1.5fr 3fr 2fr",data:d,header:[Object(x.jsx)("span",{children:"#"}),Object(x.jsx)("span",{children:"\u6587\u4ef6\u540d"}),Object(x.jsx)("span",{children:"\u6587\u4ef6\u5927\u5c0f(MB)"}),Object(x.jsx)("span",{children:"\u521b\u5efa\u65e5\u671f"}),""],isColumnSortable:[!0,!0,!0,!0,!1],maxPages:3,onPageNumberChanged:function(){},onRowClick:function(){},pageSize:5})})}),g=function(e){var t=e.isupdate,s=Object(n.useState)(),c=Object(l.a)(s,2),a=c[0],i=c[1],r=Object(n.useState)(),o=Object(l.a)(r,2),d=o[0],O=o[1],h=Object(j.c)(),p=h.Moralis,m=h.account,v=p.User.current();function g(){return(g=Object(f.a)(Object(b.a)().mark((function e(t){var s,n,c;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.Object.extend("fileStorage"),(n=new p.Query(s)).equalTo("objectId",t),e.next=5,n.first();case 5:return(c=e.sent).set("isShare",!1),c.set("shareFrom",v.attributes.ethAddress),e.next=10,c.save();case 10:alert("\u6587\u4ef6\u5df2\u7ed3\u675f\u5171\u4eab\uff01");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(Object(b.a)().mark((function e(){var t,s,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=p.Object.extend("fileStorage"),(s=new p.Query(t)).equalTo("shareFrom",m),s.equalTo("isVisible",!0),s.equalTo("isShare",!0),e.next=8,s.find();case 8:n=e.sent,i(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}();var t=[];null===a||void 0===a||a.map((function(e,s){var n=e.attributes.fileName,c=(e.attributes.createdAt.toLocaleString("chinese",{hour12:!1}),e.attributes.fileOwner.slice(0,10)),a=(e.attributes.fileSize/1024/1024).toFixed(1),i=e.id,r=Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(u.a,{color:"blue",isTransparent:!0,size:"small",text:"\u7ed3\u675f\u5171\u4eab",onClick:function(){return function(e){return g.apply(this,arguments)}(i)}})}),l=[s+1,n,a,c,r];t.push(l)})),O(t)}),[t]),Object(x.jsx)("div",{children:Object(x.jsx)(u.f,{alignCellItems:"center",columnsConfig:"0.7fr 4fr 1.5fr 3fr 2fr",data:d,header:[Object(x.jsx)("span",{children:"#"}),Object(x.jsx)("span",{children:"\u6587\u4ef6\u540d"}),Object(x.jsx)("span",{children:"\u6587\u4ef6\u5927\u5c0f(MB)"}),Object(x.jsx)("span",{children:"\u521b\u5efa\u8005"}),""],isColumnSortable:[!0,!0,!0,!0,!1],maxPages:3,onPageNumberChanged:function(){},onRowClick:function(){},pageSize:5})})},N=function(e){var t=e.isupdate,s=Object(n.useState)(),c=Object(l.a)(s,2),a=c[0],i=c[1],r=Object(n.useState)(),o=Object(l.a)(r,2),d=o[0],h=o[1],p=Object(j.c)(),m=p.Moralis,v=p.account;function g(e){return N.apply(this,arguments)}function N(){return(N=Object(f.a)(Object(b.a)().mark((function e(t){var s,n,c;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.Object.extend("fileStorage"),(n=new m.Query(s)).equalTo("objectId",t),e.next=5,n.first();case 5:return(c=e.sent).set("isShare",!0),e.next=9,c.save();case 9:console.log(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return S.apply(this,arguments)}function S(){return(S=Object(f.a)(Object(b.a)().mark((function e(t){var s,n,c;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.Object.extend("fileStorage"),(n=new m.Query(s)).equalTo("objectId",t),e.next=5,n.first();case 5:return(c=e.sent).set("isVisible",!1),e.next=9,c.save();case 9:console.log(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(Object(b.a)().mark((function e(){var t,s,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=m.Object.extend("fileStorage"),(s=new m.Query(t)).equalTo("shareFrom",v),s.equalTo("isVisible",!0),e.next=7,s.find();case 7:n=e.sent,i(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}();var t=[];null===a||void 0===a||a.map(function(){var e=Object(f.a)(Object(b.a)().mark((function e(s){var n,c,a,i,r,l,o;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.attributes.fileName,s.attributes.createdAt.toLocaleString("chinese",{hour12:!1}),s.attributes.fileOwner.slice(0,10),c=s.attributes.fileSize,a=(c/1024/1024).toFixed(1),i=s.id,Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(u.a,{color:"blue",isTransparent:!0,size:"small",text:"\u5171\u4eab",onClick:function(){return g(i)}}),Object(x.jsx)(u.a,{icon:"x",iconColor:"red",iconLayout:"icon-only",isTransparent:!0,onClick:function(){return w(i)}})]}),r=s.attributes.fileTrace,e.next=12,O.a.get(r);case 12:l=e.sent,null===(o=l.data)||void 0===o||o.map((function(e){var s=e.from.slice(0,10),c=e.to.slice(0,10),i=e.timeStamp,r=[n,a,s,c,i];t.push(r)})),t.reverse();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(t)}),[t]),Object(x.jsx)("div",{children:Object(x.jsx)(u.f,{alignCellItems:"center",columnsConfig:" 4fr 1.5fr 3fr 2fr 2fr",data:d,header:[Object(x.jsx)("span",{children:"\u6587\u4ef6\u540d"}),Object(x.jsx)("span",{children:"\u6587\u4ef6\u5927\u5c0f(MB)"}),Object(x.jsx)("span",{children:"From"}),Object(x.jsx)("span",{children:"to"}),Object(x.jsx)("span",{children:"\u65f6\u95f4"})],isColumnSortable:[!0,!0,!0,!0,!1],maxPages:3,onPageNumberChanged:function(){},onRowClick:function(){},pageSize:5})})},w=function(e){var t=e.isupdate,s=Object(n.useState)(),c=Object(l.a)(s,2),a=c[0],i=c[1],r=Object(n.useState)(),o=Object(l.a)(r,2),d=o[0],h=o[1],p=Object(j.c)(),m=p.Moralis,v=(p.account,m.User.current()),g=Object(j.d)().saveFile;function N(){return(N=Object(f.a)(Object(b.a)().mark((function e(t){var s,n,c,a;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.Object.extend("fileStorage"),n=new s,(c=new m.Query(s)).equalTo("objectId",t),e.next=6,c.first();case 6:return a=e.sent,n.set("fileTrace",a.attributes.fileTrace),n.set("fileAddress",a.attributes.fileAddress),n.set("fileName",a.attributes.fileName),n.set("fileSize",a.attributes.fileSize),n.set("fileOwner",a.attributes.fileOwner),n.set("shareFrom",v.attributes.ethAddress),n.set("isVisible",!0),n.set("isShare",!0),e.next=17,n.save();case 17:alert("\u6587\u4ef6\u5df2\u5171\u4eab\uff01");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(f.a)(Object(b.a)().mark((function e(t,s){var n,c,a,i,r,l,o,u,j,f,d;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.open(s),n=m.Object.extend("fileStorage"),(c=new m.Query(n)).equalTo("objectId",t),e.next=6,c.first();case 6:return a=e.sent,i=a.attributes.fileTrace,r=v.attributes.ethAddress,l=new Date,o=l.toLocaleString("zh",{timeZone:"Asia/Shanghai"}),e.next=13,O.a.get(i);case 13:return u=e.sent,j=u.data,f={from:r,to:"local",timeStamp:o},console.log(f),j.push(f),e.next=20,g("fileTrace.json",{base64:btoa(JSON.stringify(j))},{type:"base64",saveIPFS:!0});case 20:return d=e.sent,console.log(d.ipfs()),a.set("fileTrace",d.ipfs()),e.next=25,a.save();case 25:console.log("\u4e0b\u8f7d\u6210\u529f");case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(Object(b.a)().mark((function e(){var t,s,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=v.attributes.fileList,e.next=4,O.a.get(t);case 4:s=e.sent,n=s.data,i(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}();var t=[];null===a||void 0===a||a.map((function(e,s){var n=e.fileName,c=e.owner.slice(0,10),a=(e.size/1024/1024).toFixed(1),i=e.ID,r=e.address,l=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(u.a,{color:"blue",isTransparent:!0,size:"small",text:"\u5171\u4eab",onClick:function(){return function(e){return N.apply(this,arguments)}(i)}}),Object(x.jsx)(u.a,{icon:"download",iconColor:"blue",iconLayout:"icon-only",isTransparent:!0,onClick:function(){return function(e,t){return w.apply(this,arguments)}(i,r)}})]}),o=[s+1,n,a,c,l];t.push(o)})),h(t)}),[t]),Object(x.jsx)("div",{children:Object(x.jsx)(u.f,{alignCellItems:"center",columnsConfig:"0.7fr 4fr 1.5fr 3fr 2fr",data:d,header:[Object(x.jsx)("span",{children:"#"}),Object(x.jsx)("span",{children:"\u6587\u4ef6\u540d"}),Object(x.jsx)("span",{children:"\u6587\u4ef6\u5927\u5c0f(MB)"}),Object(x.jsx)("span",{children:"\u521b\u5efa\u8005"}),""],isColumnSortable:[!0,!0,!0,!0,!1],maxPages:3,onPageNumberChanged:function(){},onRowClick:function(){},pageSize:5})})},S=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(),s=Object(l.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)(),r=Object(l.a)(i,2),o=r[0],d=r[1],O=Object(n.useState)(),h=Object(l.a)(O,2),p=(h[0],h[1],Object(j.d)().saveFile),m=Object(n.useState)(!1),S=Object(l.a)(m,2),y=S[0],C=S[1],k=Object(j.c)(),F=k.Moralis,T=(k.account,F.User.current()),z=(Object(j.g)(),function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var t,s,n,a,i,r,l,o,u;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=F.Object.extend("fileStorage"),s=new t,!c){e.next=24;break}return n=c,a=new F.File(n.name,n),e.next=7,a.saveIPFS();case 7:return i=a.ipfs(),r=new Date,l=r.toLocaleString("zh",{timeZone:"Asia/Shanghai"}),o=[{from:"local",to:T.attributes.ethAddress,timeStamp:l}],e.next=13,p("fileTrace.json",{base64:btoa(JSON.stringify(o))},{type:"base64",saveIPFS:!0});case 13:return u=e.sent,s.set("fileTrace",u.ipfs()),s.set("fileAddress",i),s.set("fileName",n.name),s.set("fileSize",n.size),s.set("fileOwner",T.attributes.ethAddress),s.set("shareFrom",T.attributes.ethAddress),s.set("isVisible",!0),s.set("isShare",!1),e.next=24,s.save();case 24:alert("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff01"),window.location.reload(),C(!y);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),P=function(){C(!y)};return Object(n.useEffect)((function(){C(!y)}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"pageIdentify",children:"\u4e2a\u4eba\u4e2d\u5fc3"}),Object(x.jsxs)("div",{className:"mainContent",children:[Object(x.jsxs)("div",{className:"fileList",children:[Object(x.jsxs)("div",{className:"title-box",children:[Object(x.jsx)("div",{className:"title",children:"\u6211\u7684\u6587\u4ef6"}),Object(x.jsxs)("div",{className:"post",onClick:P,children:["\u66f4\u65b0",Object(x.jsx)(u.c,{fill:"#ffffff",size:20,svg:"reload"})]})]}),Object(x.jsx)(v,{isupdate:y})]}),Object(x.jsxs)("div",{className:"fileList",children:[Object(x.jsxs)("div",{className:"title-box",children:[Object(x.jsx)("div",{className:"title",children:"\u5df2\u5171\u4eab\u7684\u6587\u4ef6"}),Object(x.jsxs)("div",{className:"post",onClick:P,children:["\u66f4\u65b0",Object(x.jsx)(u.c,{fill:"#ffffff",size:20,svg:"reload"})]})]}),Object(x.jsx)(g,{isupdate:y})]}),Object(x.jsxs)("div",{className:"fileList",children:[Object(x.jsxs)("div",{className:"title-box",children:[Object(x.jsx)("div",{className:"title",children:"\u83b7\u53d6\u7684\u6587\u4ef6"}),Object(x.jsxs)("div",{className:"post",onClick:P,children:["\u66f4\u65b0",Object(x.jsx)(u.c,{fill:"#ffffff",size:20,svg:"reload"})]})]}),Object(x.jsx)(w,{isupdate:y})]}),Object(x.jsxs)("div",{className:"fileList",children:[Object(x.jsxs)("div",{className:"title-box",children:[Object(x.jsx)("div",{className:"title",children:"\u6587\u4ef6\u6d41"}),Object(x.jsxs)("div",{className:"post",onClick:P,children:["\u66f4\u65b0",Object(x.jsx)(u.c,{fill:"#ffffff",size:20,svg:"reload"})]})]}),Object(x.jsx)(N,{isupdate:y})]}),Object(x.jsx)("div",{className:"title-box",children:Object(x.jsx)("div",{className:"title",children:"\u4e0a\u4f20\u6587\u4ef6"})}),Object(x.jsx)("div",{className:"btn-box",children:Object(x.jsxs)("div",{className:"choose-file",children:[Object(x.jsx)("div",{className:"post",onClick:function(){e.current.click()},children:"\u9009\u62e9\u6587\u4ef6"}),Object(x.jsx)("input",{type:"file",name:"file",ref:e,onChange:function(e){var t=e.target.files[0];a(t),d(t.name)},style:{display:"none"}}),Object(x.jsxs)("div",{className:"post",onClick:z,style:{backgroundColor:"#8247e5"},children:["\u4e0a\u4f20",Object(x.jsx)(u.c,{fill:"#ffffff",size:20,svg:"checkmark"})]})]})}),Object(x.jsx)("div",{className:"fileName",children:Object(x.jsx)("h3",{children:o})})]})]})})},y=(s(1347),function(){var e=Object(n.useRef)(null),t=Object(n.useState)(),s=Object(l.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)(),r=Object(l.a)(i,2),o=r[0],d=r[1],O=Object(n.useState)(),h=Object(l.a)(O,2),p=h[0],m=h[1],v=Object(n.useState)(),g=Object(l.a)(v,2),N=g[0],w=g[1],S=Object(n.useState)(),y=Object(l.a)(S,2),C=y[0],k=y[1],F=Object(n.useState)(),T=Object(l.a)(F,2),z=T[0],P=T[1],A=Object(n.useState)(),I=Object(l.a)(A,2),L=I[0],B=I[1],Q=Object(n.useState)(),M=Object(l.a)(Q,2),U=M[0],q=M[1],V=Object(j.c)().Moralis,R=Object(n.useState)(!1),E=Object(l.a)(R,2),D=E[0],W=E[1],H=V.User.current(),J=function(){var e=Object(f.a)(Object(b.a)().mark((function e(){var t,s,n,c,a;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=V.Object.extend("_User"),s=new V.Query(t),e.next=4,s.first();case 4:if(n=e.sent,p&&n.set("username",p),N&&n.set("name",N),C&&n.set("email",C),L&&n.set("institute",L),z&&n.set("bio",z),U&&n.set("job",U),!o){e.next=17;break}return c=o,a=new V.File(c.name,c),e.next=16,a.saveIPFS();case 16:n.set("profilePic",a.ipfs());case 17:return e.next=19,n.save();case 19:W(!0),window.location.reload();case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"pageIdentify",children:"\u8bbe\u7f6e"}),Object(x.jsxs)("div",{className:"settingsPage",children:[Object(x.jsx)("div",{className:"title",children:"\u8d26\u6237"}),Object(x.jsxs)("div",{className:"accountBox",children:[Object(x.jsx)("img",{className:"profilepic-large",src:c||H.attributes.profilePic}),Object(x.jsxs)("div",{className:"editBox",children:[Object(x.jsxs)("div",{className:"btnBox",onClick:function(){e.current.click()},children:[Object(x.jsx)("input",{type:"file",name:"file",ref:e,onChange:function(e){var t=e.target.files[0];d(t),a(URL.createObjectURL(t))},style:{display:"none"}}),Object(x.jsx)(u.a,{color:"blue",id:"changePic",text:"\u66f4\u6362\u5934\u50cf",theme:"secondary",type:"button"})]}),Object(x.jsxs)("div",{className:"input-box-text",children:[Object(x.jsx)("div",{className:"input-title",children:"\u6635\u79f0"}),Object(x.jsx)(u.d,{label:"",value:D?p:H.attributes.username,width:"20%",labelBgColor:"#141d26",onChange:function(e){return m(e.target.value)}})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"input-title",children:"\u8d26\u6237\u5730\u5740\uff1a"}),Object(x.jsx)("div",{className:"text-italic",children:H.attributes.ethAddress})]})]})]}),Object(x.jsx)("div",{className:"title",children:"\u4e2a\u4eba\u7b80\u4ecb"}),Object(x.jsx)(u.g,{width:"100%",value:D?z:H.attributes.bio,onChange:function(e){return P(e.target.value)}}),Object(x.jsx)("div",{className:"title",children:"\u4e2a\u4eba\u4fe1\u606f"}),Object(x.jsxs)("div",{className:"inputBoxs",children:[Object(x.jsxs)("div",{className:"inputBox",children:[Object(x.jsxs)("div",{className:"input-box-text",children:[Object(x.jsx)("div",{className:"input-title",children:"\u59d3\u540d"}),Object(x.jsx)(u.d,{label:"",name:"NameChange",value:D?N:H.attributes.name,width:"100%",labelBgColor:"#141d26",onChange:function(e){return w(e.target.value)}})]}),Object(x.jsxs)("div",{className:"input-box-text",children:[Object(x.jsx)("div",{className:"input-title",children:"\u90ae\u7bb1"}),Object(x.jsx)(u.d,{label:"",name:"MailChange",value:D?C:H.attributes.email,width:"100%",labelBgColor:"#141d26",onChange:function(e){return k(e.target.value)}})]})]}),Object(x.jsxs)("div",{className:"inputBox",children:[Object(x.jsxs)("div",{className:"input-box-text",children:[Object(x.jsx)("div",{className:"input-title",children:"\u5355\u4f4d"}),Object(x.jsx)(u.d,{label:"",name:"instiChange",value:D?L:H.attributes.institute,width:"100%",labelBgColor:"#141d26",onChange:function(e){return B(e.target.value)}})]}),Object(x.jsxs)("div",{className:"input-box-text",children:[Object(x.jsx)("div",{className:"input-title",children:"\u804c\u52a1"}),Object(x.jsx)(u.d,{label:"",name:"jobChange",value:D?U:H.attributes.job,width:"100%",labelBgColor:"#141d26",onChange:function(e){return q(e.target.value)}})]})]})]}),Object(x.jsx)("div",{className:"save",onClick:function(){return J()},children:"\u4fdd\u5b58"})]})]})}),C=(s(1348),s(129)),k=s.p+"static/media/rubick.9d209c95.png",F=function(){var e=Object(j.c)().Moralis.User.current(),t=k,s=Object(n.useState)(0),c=Object(l.a)(s,2),a=c[0],i=c[1];return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"siderContent",children:[Object(x.jsxs)("div",{className:"menu",children:[Object(x.jsx)("div",{className:"details",children:Object(x.jsx)("img",{src:t,className:"myLogo",alt:"",onClick:function(){var e=a;9===(e+=1)&&(alert("\u606d\u559c\u4f60\u53d1\u73b0\u5f69\u86cb\uff1afileSynergy-beta\u7248\u4e0a\u7ebf\u7684\u65f6\u95f4\u6b63\u597d\u662f\u4f5c\u8005\u7684\u751f\u65e5\u54e6~~~~~~~~~~"),i(0)),i(e)}})}),Object(x.jsx)(C.b,{to:"/",className:"link",children:Object(x.jsxs)("div",{className:"menuItems",children:[Object(x.jsx)(u.c,{fill:"#ffffff",size:33,svg:"list"}),"\u4e3b\u9875"]})}),Object(x.jsx)(C.b,{to:"/profile",className:"link",children:Object(x.jsxs)("div",{className:"menuItems",children:[Object(x.jsx)(u.c,{fill:"#ffffff",size:33,svg:"user"}),"\u4e2a\u4eba\u4e2d\u5fc3"]})}),Object(x.jsx)(C.b,{to:"/settings",className:"link",children:Object(x.jsxs)("div",{className:"menuItems",children:[Object(x.jsx)(u.c,{fill:"#ffffff",size:33,svg:"cog"}),"\u8bbe\u7f6e"]})})]}),Object(x.jsxs)("div",{className:"details",children:[Object(x.jsx)("img",{src:e.attributes.profilePic?e.attributes.profilePic:o[2],className:"profilePic"}),Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)("div",{className:"who",children:e.attributes.username.slice(0,6)}),Object(x.jsx)("div",{className:"accWhen",children:"".concat(e.attributes.ethAddress.slice(0,4),"...").concat(e.attributes.ethAddress.slice(38))})]})]})]})})},T=(s(1349),s(1350),function(){var e=Object(j.c)(),t=e.Moralis,s=(e.account,t.User.current(),Object(n.useState)()),c=Object(l.a)(s,2),a=c[0],i=c[1];return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(Object(b.a)().mark((function e(){var s,n,c,a;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=t.Object.extend("Message"),n=new t.Query(s),e.next=5,n.find();case 5:c=e.sent,a=null===c||void 0===c?void 0:c.slice(-7),i(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),Object(x.jsx)(x.Fragment,{children:null===a||void 0===a?void 0:a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"messageBox",children:[Object(x.jsx)("img",{src:e.attributes.messageUserPic?e.attributes.messageUserPic:o[2],className:"profilepic-small"}),Object(x.jsxs)("div",{className:"messages",children:[Object(x.jsxs)("div",{className:"userName",children:[e.attributes.messageUserName,Object(x.jsx)("div",{className:"time",children:"".concat(e.attributes.messageAcc.slice(0,4),"...").concat(e.attributes.messageAcc.slice(38)," at\n                                ").concat(e.attributes.createdAt.toLocaleString("en-us",{month:"short"}),"  \n                                ").concat(e.attributes.createdAt.toLocaleString("en-us",{day:"numeric"}),"\n                                ")})]}),Object(x.jsx)("div",{className:"messageContent",children:e.attributes.messageTxt})]})]})})})).reverse()})}),z=function(){var e=Object(j.c)().Moralis,t=e.User.current(),s=Object(n.useState)(),c=Object(l.a)(s,2),a=c[0],i=c[1];function r(){return(r=Object(f.a)(Object(b.a)().mark((function s(){var n,c;return Object(b.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a){s.next=2;break}return s.abrupt("return");case 2:return n=e.Object.extend("Message"),(c=new n).set("messageTxt",a),c.set("messageUserName",t.attributes.username),c.set("messageAcc",t.attributes.ethAddress),c.set("messageUserPic",t.attributes.profilePic),s.next=10,c.save();case 10:window.location.reload();case 11:case"end":return s.stop()}}),s)})))).apply(this,arguments)}return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"rightbarContent",children:Object(x.jsxs)("div",{className:"messageBoard",children:[Object(x.jsx)("nav",{className:"nav-text",children:"\u7559\u8a00\u677f"}),Object(x.jsx)("div",{className:"textArea",children:Object(x.jsx)(u.g,{label:"",name:"messageTxtArea",type:"text",onChange:function(e){return i(e.target.value)},width:"95%"})}),Object(x.jsx)("div",{className:"post-btn",onClick:function(){return r.apply(this,arguments)},children:Object(x.jsx)("div",{className:"post",children:Object(x.jsx)(u.c,{fill:"#ffffff",size:20,svg:"telegram"})})}),Object(x.jsx)("div",{className:"messageTabs",children:Object(x.jsx)("div",{className:"messageTab",children:"\u6700\u65b0\u7559\u8a00"})}),Object(x.jsx)(T,{})]})})})},P=(s(1351),function(){var e=Object(j.c)(),t=e.isAuthenticated,s=e.Moralis,n=k;return Object(x.jsx)(x.Fragment,{children:t?Object(x.jsxs)("div",{className:"page",children:[Object(x.jsxs)("div",{className:"sideBar",children:[Object(x.jsx)(F,{}),Object(x.jsx)("div",{className:"logout",onClick:function(){s.User.logOut().then((function(){window.location.reload()}))},children:Object(x.jsxs)("div",{className:"menuItems",children:["\u9000\u51fa",Object(x.jsx)(u.c,{fill:"#ffffff",size:33,svg:"logOut"})]})}),Object(x.jsx)("footer",{className:"footer-text",children:Object(x.jsx)("h4",{children:"\xa9Copyright THU-WangQi 2022 "})})]}),Object(x.jsx)("div",{className:"mainWindow",children:Object(x.jsxs)(r.c,{children:[Object(x.jsx)(r.a,{path:"/",element:Object(x.jsx)(m,{})}),Object(x.jsx)(r.a,{path:"/profile",element:Object(x.jsx)(S,{})}),Object(x.jsx)(r.a,{path:"/settings",element:Object(x.jsx)(y,{})})]})}),Object(x.jsx)("div",{className:"rightBar",children:Object(x.jsx)(z,{})})]}):Object(x.jsxs)("div",{className:"loginPage",children:[Object(x.jsx)("img",{className:"myLogo",src:n,alt:""}),Object(x.jsx)(u.b,{})]})})}),A=function(e){e&&e instanceof Function&&s.e(17).then(s.bind(null,1635)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;s(e),n(e),c(e),a(e),i(e)}))};i.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(j.a,{appId:"6cSvnXGIKw65FBHDFhSRBrb6RQd3HLQ6LveTCMQs",serverUrl:"https://srmoi8g1vyww.usemoralis.com:2053/server",children:Object(x.jsx)(u.e,{children:Object(x.jsx)(C.a,{children:Object(x.jsx)(P,{})})})})}),document.getElementById("root")),A()},660:function(e,t,s){},661:function(e,t,s){},958:function(e,t){},967:function(e,t){},968:function(e,t){},969:function(e,t){},970:function(e,t){},971:function(e,t){},972:function(e,t){},973:function(e,t){},995:function(e,t){}},[[1352,5,6]]]);
//# sourceMappingURL=main.2908d845.chunk.js.map